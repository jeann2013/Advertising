<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <title>Hello World</title>
         <link href="js/video_js/video-js.css" rel="stylesheet" type="text/css">
    </head>
    <body onload="onDeviceReady()" >
        <p id="deviceProperties">Loading properties...</p>




        <video id="vd" class="video-js vjs-default-skin"   controls preload="none" width="720" height="464"
        poster="http://video-js.zencoder.com/oceans-clip.png"
        data-setup="{}">
        </video>


        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script src="js/video_js/video.js"></script>

        <script type="text/javascript">

            document.addEventListener("offline", mensaje(1), false);
            document.addEventListener("online", mensaje(2), false);
            function mensaje(accion)
            {            
                if (accion==1){alert('Sin Red');}
                if (accion==2){alert('Hay Red');}
            }
            

            function cargarvideo()
            {
                var myPlayer = videojs('vd');
                myPlayer.src([{ type: "video/mp4", src: "storage/emulated/0/Advertising/video2.mp4" }]);
                //myPlayer.src([{ type: "video/mp4", src: "cdvfile://localhost/persistent/Advertising/video2.mp4" }]);
                //myPlayer.src([{ type: "video/mp4", src: "file:///storage/emulated/0/Advertising/video2.mp4" }]);
                
                myPlayer.play();
            }

            function onDeviceReady() 
            {
                alert('Modelo: '+device.model);
                alert('Cordova: '+device.cordova);
                alert('Plataforma: '+device.platform);
                alert('Id: '+device.uuid);
                alert('Version: '+device.version);
                files();
            }

    function checkConnection() {
        var networkState = navigator.connection.type;
        alert(networkState);
        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.CELL]     = 'Cell generic connection';
        states[Connection.NONE]     = 'No network connection';

        alert('Connection type: ' + states[networkState]);
    }


     function files(){

            var fileTransfer = new FileTransfer();
            var uri = encodeURI("http://192.168.1.143/video2.mp4");
            var fileURL ='cdvfile://localhost/persistent/Advertising/video2.mp4';
            fileTransfer.download(
                uri,
                fileURL,
                function(entry) {
                   alert('Se bajo el archivo.');
                  //cargarvideo();
                },
                function(error) {
                    alert('Hubo un peo.');
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code" + error.code);
                },
                false,
                {
                    headers: {
                        "Authorization": "Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="
                    }
                }
            );

     }
        




        </script>

    </body>
</html>
